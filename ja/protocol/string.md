# 文字列形式コマンド
## 目次
- [目次](#目次)
- [フォーマット](#フォーマット)
- [HEADER](#HEADER)
- [COMMAND_TYPE](#COMMAND_TYPE)
- [DATA_TYPE](#DATA_TYPE)
- [DATA_NUM](#DATA_NUM)
- [OPTION](#OPTION)
- [TERMINAL_SYMBOL](#TERMINAL_SYMBOL)

## フォーマット
~~~
{HEADER}{COMMAND_TYPE}{DATA_DYPE}{DATA_NUM}{OPTION}{TERMINAL_SYMBOL}
~~~
基本的に, BIDSの文字列形式要求コマンドは, 上記のような形式をとります.

上記での表記と意味の対照は, 次の表のとおりです.  なお, "必須"列に`*`が入っている場合, その要素がコマンドに必須であることを示します.
|必須|表記|意味|
|---|---|---|
|*|{HEADER}|BIDSの文字列形式コマンドが始まる目印|
|*|{COMMAND_TYPE}|要求の種類|
| |{DATA_TYPE}|要求データの種類|
|*|{DATA_NUM}|要求するデータに対応する番号 OR 要求事項に関連する数値等|
| |{OPTION}|各コマンド固有のオプション文字列|
|*|{TERMINAL_STRING}|終端記号|

## HEADER
2文字で構成されます.  BIDS規格では, 常に文字列"TR"(16進数 0x5452)が入ります.  
GIPI互換機能として, "TO"(16進数 0x544F)も使用できますが, これに関しては[文字列形式コマンド(GIPI互換機能用)](./string.gipi.md)をご覧ください.

## COMMAND_TYPE
1文字で構成されます.  使用できる文字一覧は, 次の通りです.
|文字|HEX|意味|
|---|---|---|
|V|0x56|使用できるプロトコルバージョンを取得する|
|I|0x49|情報の送信を要求する|
|A|0x41|情報の自動送信開始を要求する|
|D|0x44|情報の自動送信解除を要求する|
|E|0x45|エラー発生を通知する|
|R|0x52|レバーサーの操作を要求する|
|P|0x50|力行ハンドルの操作を要求する|
|B|0x42|制動ハンドルの操作を要求する|
|S|0x53|ワンハンドルマスコンの操作を要求する|
|K|0x4B|キー(ボタン)操作を要求する|

## DATA_TYPE
1文字で構成されます.  v202現在, COMMAND_TYPE:I, A, Dでのみ使用します.  使用できる文字一覧は, 次の通りです.

(準備中)

## DATA_NUM
一部例外を除き, 数値で構成されます.  各COMMAND_TYPE, DATA_TYPEごとの意味対照は, 次の通りです.

(準備中)

## OPTION
一部コマンドで使用する, オプション指定用部分です.

|COMMAND_TYPE|文字列|16進数|意味|
|---|---|---|---|
|K|D|0x44|キー(ボタン)を押す|
|K|U|0x55|キー(ボタン)を離す|
|(※1)|X000||コマンドへの返答に関する情報送信に用いられる.  000の部分には返答の数値が入る|

- (※1) : コマンドへの返答にて使用されます.

## TERMINAL_SYMBOL
コマンドの終端を示します.  Carriage Return:"\r"(0x0D), Line Feed:"\n"(0x0A), またはCRLF:"\r\n"(0x0D0A)のいずれかを使用できます.  
推奨はLine Feed:"\n"(0x0A)です.
